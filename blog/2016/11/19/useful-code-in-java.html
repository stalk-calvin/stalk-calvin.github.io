<!DOCTYPE html>
<!-- Post Layout Start --><html lang="en">

  
<!-- HEAD Start -->

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  


  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Stories about Calvin: Beer, Fitness, Diet, Computer Science and Programming.">
  <meta name="author" content="Calvin Lee">
  <meta name="keywords" content="calvin, lee, personal, blog, beer, fitness, diet, computer, science, programming">
  <link rel="canonical" href="/blog/2016/11/19/useful-code-in-java.html">
  <title>I am Calvin | Useful Java Code</title>

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

  <!-- Custom CSS -->
  <link href="/css/grayscale.css" rel="stylesheet">
  

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/rrssb.css">
  <link rel="stylesheet" href="/css/custom.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
  

  

  


  <!-- iOS Web App mode -->

  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="apple-touch-icon" sizes="36x36" href="/img/web-app/icon-36p.png">
  <link rel="apple-touch-icon" sizes="48x48" href="/img/web-app/icon-48p.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/web-app/icon-72p.png">
  <link rel="apple-touch-icon" sizes="96x96" href="/img/web-app/icon-96p.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/web-app/icon-144p.png">
  <link rel="apple-touch-icon" sizes="192x192" href="/img/web-app/icon-192p.png">

  <!-- Android Web App mode -->

  <link rel="manifest" href="/manifest.json">




  
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">


  



  
  <!-- MathJax -->
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>
<!-- HEAD End -->


  <body>

    
<!-- Navigation Start -->

<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
        <i class="fa fa-bars"></i>
      </button>
      
        <a class="navbar-brand" href="/">
      
          <div>
            
              <img src="/img/black-lab-glass.ico" alt="favicon">
            
            <h4 style="display:inline">I am Calvin</h4>
          </div>
        </a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
      <ul class="nav navbar-nav">
        
          <!-- Blog, Post, Tag and Error pages -->
          
            <li>
            
                <a href="/#about"> About </a>
            
            </li>
          
            <li>
            
              
                <a href="/blog/"> Blog </a>
              
            
            </li>
          
            <li>
            
                <a href="/#timeline"> Timeline </a>
            
            </li>
          
            <li>
            
                <a href="/#search"> Search </a>
            
            </li>
          
            <li>
            
                <a href="/#contact"> Contact </a>
            
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>

<!-- Navigation End -->


    <section id="post" class="container content-section ">
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <h1 style="display:inline; color: #F4A460;"><strong>Useful Java Code</strong></h1>
          <h4 style="display:inline; color: #F4A460;"><strong>From my experience <img class="emoji" title=":smile:" alt=":smile:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png" height="20" width="20" align="absmiddle"></strong></h4>
<br>
          <h4>
            <strong>19 Nov 2016</strong>
            <small>
              <a href="/blog/2016/11/19/useful-code-in-java.html#disqus_thread">Comments</a>
              <br>
              
                <a class="tag" href="/tags/#java">#java</a>
              
                <a class="tag" href="/tags/#computer">#computer</a>
              
                <a class="tag" href="/tags/#books">#books</a>
              
            </small>
          </h4>

          <nav class="pagination" role="navigation">
            
              <a href="https://stalk-calvin.github.io/blog/2016/11/12/Favourite-Books.html" class="btn" title="5 best computer books">Previous</a>
            
            
              <a href="https://stalk-calvin.github.io/blog/2016/11/26/google-guava.html" class="btn" title="Google Guava">Next</a>
            
          </nav><!-- /.pagination -->

          <h3 id="i-classfa-fa-quote-left-aria-hiddentruei-some-useful-code-blocks-i-find-useful-in-java-i-classfa-fa-quote-right-aria-hiddentruei">
<i class="fa fa-quote-left" aria-hidden="true"></i> Some useful code blocks I find useful in Java <i class="fa fa-quote-right" aria-hidden="true"></i>
</h3>

<p>I am not sure about you guys, but at least for Java, there are certainly block of codes I like to keep around for later use. I have came across some useful ones (with concept) which I will cover here mainly for reference.</p>

<h3 id="dao---data-access-object">1. DAO - Data Access Object</h3>

<p>DAO is an abstraction where it provides an interface to data objects such as SQL/NoSQL Database, CSV, Spreadsheet, etc. It could literally be anything to store values. If you have typical structures to store some item. That could also be a DAO.</p>

<p>Simple codes that shows how it could handle various DAO Object in maybe a dao factory which constructs and provide you objects needed, Example of using Factory pattern:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DAOFactory</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">DatabaseAccessObject</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">,</span> <span class="n">Config</span> <span class="n">config</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DatabaseAccessObject</span> <span class="n">dao</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">MONGO_DATABASE</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MongoDatabase</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">DATABASE</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Database</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">CSV</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CSV</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedDAOException</span><span class="o">(</span><span class="s">"not supported dao: "</span><span class="o">+</span><span class="n">type</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">dao</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>I would make the dao implements DatabaseAccessObject interface which provides basic operations such as OpenConnection, CloseConnection, getRows, writeRows, getColumns, writeColumns, ping, etc. That would be coomon in each DAO object.</p>

<h3 id="pojo---plain-old-java-object">2. POJO - Plain Old Java Object</h3>

<p>There are many ways to create a Java Object from different set of documents. You can read/write from/to XML and JSON are the 2 great examples. However, you use the term for making anything into Java Objects such as Databases-POJO (Hibernate). I will just cover the 2 representations, XML and JSON here.</p>

<p><img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png" height="20" width="20" align="absmiddle"> XML<br></p>

<p>There are many different ways to make a POJO out of XML. Using @XStream is one of the ways. Here is a very simple usage. Say your xml look like,</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;person&gt;</span>
   <span class="nt">&lt;birth_day&gt;</span>1980-01-01 00:00:01<span class="nt">&lt;birth_day&gt;</span>
... etc ...
<span class="nt">&lt;/person&gt;</span></code></pre></figure>

<p>Then you could convert this to a POJO by:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> <span class="nd">@XStreamAlias</span><span class="o">(</span><span class="s">"Person"</span><span class="o">)</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
 
     <span class="nd">@XStreamAsAttribute</span>
     <span class="nd">@XStreamAlias</span><span class="o">(</span><span class="s">"birth_day"</span><span class="o">)</span>
     <span class="kd">private</span> <span class="n">String</span> <span class="n">birthDay</span><span class="o">;</span> <span class="o">/</span></code></pre></figure>

<p>Another way would be using a <a href="https://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html">sax</a> and parse the raw XML. I find the benefit of using this is this is much flexible on what you wish to do. You can do something like getXMLDeclCharset, parseThisAsSuch using a DefaultHandler. Here is an example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">String</span> <span class="nf">parseThisAsSuch</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">xmlStream</span><span class="o">,</span> <span class="n">Charset</span> <span class="n">cs</span><span class="o">,</span> <span class="n">SAXParser</span> <span class="n">reader</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SAXException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="k">try</span>
    <span class="o">{</span>
        <span class="n">DefaultHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHandler</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">endElement</span><span class="o">(</span><span class="n">String</span> <span class="n">uri</span><span class="o">,</span> <span class="n">String</span> <span class="n">localName</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span>
                    <span class="kd">throws</span> <span class="n">SAXException</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">' '</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startElement</span><span class="o">(</span><span class="n">String</span> <span class="n">uri</span><span class="o">,</span> <span class="n">String</span> <span class="n">localName</span><span class="o">,</span>
                    <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Attributes</span> <span class="n">attributes</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SAXException</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">' '</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">characters</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">ch</span><span class="o">,</span> <span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SAXException</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">sbtmp</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">ch</span><span class="o">,</span> <span class="n">start</span><span class="o">,</span> <span class="n">length</span><span class="o">));</span>
                    <span class="n">sbtmp</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'\n'</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">setContentHandler</span><span class="o">(</span><span class="n">handler</span><span class="o">);</span>            
        <span class="n">reader</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">createInputSource</span><span class="o">(</span><span class="n">stream</span><span class="o">,</span> <span class="n">cs</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">IOException</span> <span class="n">ioe</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">SAXException</span><span class="o">(</span><span class="n">ioe</span><span class="o">);</span>
    <span class="o">:</span><span class="n">wq</span><span class="o">!}</span> 

    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>As you can see, using SAXParser would add granularity to how the document is being parsed. This granularity could save you a bit of coding and time.</p>

<p><img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png" height="20" width="20" align="absmiddle"> JSON<br></p>

<p>There are also numerous ways to make a POJO out of JSON. A simple way is to use Jackson 2 (com.fasterxml.jackson.databind). Here is to read from JSON.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ObjectMapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>
<span class="n">String</span> <span class="n">jsonInString</span> <span class="o">=</span> <span class="s">"{'name' : 'calvin'}"</span><span class="o">;</span>

<span class="c1">//JSON from file to Object</span>
<span class="n">Staff</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"&lt;json_file_location&gt;"</span><span class="o">),</span> <span class="n">Staff</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//JSON from URL to Object</span>
<span class="n">Staff</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://mkyong.com/api/staff.json"</span><span class="o">),</span> <span class="n">Staff</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//JSON from String to Object</span>
<span class="n">Staff</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="n">jsonInString</span><span class="o">,</span> <span class="n">Staff</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure>

<p>However, I personally use Gson from Google most of the time. Its similar logic as above. Let’s take a look at a Staff JSON:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nt">"staff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"calvin"</span><span class="p">,</span><span class="w">
  </span><span class="err">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Now in order to make a POJO, all you need is below:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Staff</span> <span class="o">{</span>
   <span class="nd">@SerializedName</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">staffId</span><span class="o">;</span>
   <span class="nd">@SerializedName</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">staffName</span><span class="o">;</span>
   <span class="o">...</span> <span class="n">etc</span> <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<h3 id="exception-template">3. Exception Template</h3>

<p>I think it is good to divide Exceptions into different sub-exceptions. We looked at DAO above, here would be an exception caused by DAO.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataAccessObjectException</span> <span class="kd">extends</span> <span class="n">Exception</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">DataAccessObjectException</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">DataAccessObjectException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">DataAccessObjectException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">cause</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">DataAccessObjectException</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">cause</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>Templates are similar for any other exceptions, however, it gives names to what kind of exception it was and what it was for.</p>

<h3 id="copying-a-file-to-another-location">4. Copying a file to another location</h3>

<p>Here is a way to copy a file to another file.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">copyFile</span><span class="o">(</span><span class="n">File</span> <span class="n">fromFile</span><span class="o">,</span> <span class="n">File</span> <span class="n">toFile</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">BufferedInputStream</span> <span class="n">bis</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">BufferedOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">// reading and writing 16 KB at a time</span>
        <span class="kt">int</span> <span class="n">bSize</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">bSize</span><span class="o">];</span>
    
        <span class="n">bis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">fromFile</span><span class="o">),</span> <span class="n">bSize</span><span class="o">);</span>
        <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">toFile</span><span class="o">),</span> <span class="n">bSize</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">last</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">last</span> <span class="o">=</span> <span class="n">bis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">buffer</span><span class="o">.</span><span class="na">length</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">bos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">last</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">bos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ioe</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Unable to copy fromFile: "</span> <span class="o">+</span> <span class="n">fromFile</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">bis</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">bis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">bos</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">bos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3 id="new-list-using-static-factories">5. New list using static factories</h3>

<p>Unless you are using a Guava libraries, I suggest you make your own static factory that handles these data structures with name like below example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="nf">newHashMap</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="nf">newHashMap</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialSize</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;(</span><span class="n">initialSize</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">newArrayList</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">newArrayList</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialSize</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;(</span><span class="n">initialSize</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h3 id="way-to-initialize-common-data-structures">6. Way to initialize common data structures</h3>

<p>Initialize HashSet:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">SYSTEM_COLLECTIONS_NAMES</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">add</span><span class="o">(</span><span class="s">"system.namespaces"</span><span class="o">);</span>
        <span class="n">add</span><span class="o">(</span><span class="s">"system.indexes"</span><span class="o">);</span>
        <span class="n">add</span><span class="o">(</span><span class="s">"system.profile"</span><span class="o">);</span>
        <span class="n">add</span><span class="o">(</span><span class="s">"system.js"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre></figure>

<p>Initializing a List:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
   <span class="o">{</span>
     <span class="n">add</span><span class="o">(</span><span class="s">"A"</span><span class="o">);</span>
     <span class="n">add</span><span class="o">(</span><span class="s">"B"</span><span class="o">);</span>
     <span class="n">add</span><span class="o">(</span><span class="s">"C"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">};</span></code></pre></figure>

<p>Initialize HashMap:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">h</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
   <span class="o">{</span>
      <span class="n">put</span><span class="o">(</span><span class="s">"a"</span><span class="o">,</span><span class="s">"b"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">};</span></code></pre></figure>

<p>Or since you are defining statically, you can simply use static block to initialize.</p>

<h3 id="conclusion">Conclusion</h3>

<p>There are so many useful convenient functions out there such as using annotations, interfaces, or Mockito. However, those items deserve a separate blog on their own as there are many details to talk about those. Above items are really just reference to me and people who might also find them useful. They often times come handy as they did for me. There are so many other useful <a href="https://github.com/stalk-calvin/Algorithms/tree/master/src/main/java/org/calvin/DesignPatterns">design patterns</a> I included as part of Algorithms Playground Project. Go to the linked URL and you will see bunch of design patterns on all categorized with its own unit tests to show you a better understanding on each. Please step through the examples to understand how each of them work step by step and see differences from another.</p>


          
<!-- Share Buttons Start -->
<div>
  <h5 style="margin-bottom:1em;margin-left:.5em;">
<i class="fa fa-quote-left" aria-hidden="true"></i> Share this post <i class="fa fa-quote-right" aria-hidden="true"></i>
</h5>
  <ul class="rrssb-buttons clearfix">
    
      <li class="rrssb-email">
        <a href="mailto:?subject=Useful%20Java%20Code&amp;body=https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html" data-proofer-ignore>
          <span class="rrssb-icon">
            <svg xmlns="https://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
              <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path>
            </svg>
          </span>
        </a>
      </li>
    
    
      <li class="rrssb-facebook">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html&amp;title=Useful%20Java%20Code" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="https://www.w3.org/2000/svg" preserveaspectratio="xMidYMid" width="29" height="29" viewbox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" class="cls-2" fill-rule="evenodd"></path></svg>
          </span>
        </a>
      </li>
    
    
      <li class="rrssb-twitter">
        <a href="https://twitter.com/share?url=https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html&amp;text=Useful%20Java%20Code" class="popup">
          <span class="rrssb-icon"><svg xmlns="https://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z"></path></svg></span>
        </a>
      </li>
    
    
      <li class="rrssb-linkedin">
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html" class="popup">
        <span class="rrssb-icon">
          <svg xmlns="https://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
            <path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path>
          </svg>
        </span>
      </a>
      </li>
    
    
    
      <li class="rrssb-googleplus">
        <a href="https://plus.google.com/share?url=https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path></svg>
          </span>
        </a>
      </li>
    
    
  </ul>
</div>

<!-- Share Buttons End -->


          
            <div id="disqus_thread"></div>
<!-- /#disqus_thread -->
            <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'stalkcalvin'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

          

          <nav class="pagination" role="navigation">
            
              <a href="https://stalk-calvin.github.io/blog/2016/11/12/Favourite-Books.html" class="btn" title="5 best computer books">Previous</a>
            
            
              <a href="https://stalk-calvin.github.io/blog/2016/11/26/google-guava.html" class="btn" title="Google Guava">Next</a>
            
          </nav><!-- /.pagination -->

          <hr>

          
          <div class="author row">
            <img class="col-xs-4 col-sm-3 col-md-2" src="/img/author.jpg" alt="Me">
            <p class="col-xs-8 col-sm-9 col-md-10">
              Calvin Lee is a passionate software developer working in Gastown, Vancouver. <br>If you would like to connect with him, choose one from below options :) You can also just send me an email at <a href="mailto:stalk.calvin@gmail.com?subject=Mail%20from%20Calvin&amp;lrquo;s%20Blog">stalk.calvin@gmail.com</a>
            </p>
          </div>
          
        </div>
      </div>
    </section>

    
 <!-- Footer Start -->

<footer>

    
<!-- Social Buttons Start -->

<ul class="list-inline social-buttons">
  
    <li><a href="https://instagram.com/stalk.calvin" target="_blank"><i class="fa fa-instagram fa-fw"></i></a></li>
  
    <li><a href="https://linkedin.com/in/stalkme" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i></a></li>
  
    <li><a href="https://github.com/stalk-calvin" target="_blank"><i class="fa fa-github-alt fa-fw"></i></a></li>
  
    <li><a href="https://www.hackerrank.com/stalk_calvin" target="_blank"><i class="fa fa-header fa-fw"></i></a></li>
  
    <li><a href="https://untappd.com/user/stalk-calvin" target="_blank"><i class="fa fa-beer fa-fw"></i></a></li>
  
    <li><a href="/feed.xml" target="_blank"><i class="fa fa-rss fa-fw"></i></a></li>
  
</ul>

<!-- Social Buttons End -->


    <p><br><br></p>

    <div class="container text-center">
      <p>Copyright © Calvin Lee 2016</p>
    </div>
</footer>

<p><br><br><br><br><br><br></p>

<!-- Footer End -->


    
<!-- Javascript Start -->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Custom Theme JavaScript -->
<!--* Start Bootstrap - Grayscale Bootstrap Theme (http://startbootstrap.com)
* Code licensed under the Apache License v2.0.
* For details, see http://www.apache.org/licenses/LICENSE-2.0.-->
<script>
$(document).on('click',function(){
$('.collapse').collapse('hide');
})
</script> 
<script>
function toggleNavCollapse(){50<$(".navbar").offset().top?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse");}
$(document).ready(toggleNavCollapse);
$(window).scroll(toggleNavCollapse);$(function(){$("a.page-scroll").bind("click",function(b){var a=$(this);$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top-50},1500,"easeInOutExpo",function(){a.blur()});b.preventDefault()})});$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()});
</script>













<script>
function addTohistory() {
  if (!window.location.host.startsWith("127.0.0.1")) {
    history.pushState({}, 'Useful Java Code', 'https://stalk-calvin.github.io/blog/2016/11/19/useful-code-in-java.html');
  }
}
</script>

<!-- Gesture Navigation / Swipe Instruction Start -->


  

  

  

  

<!-- Gesture Navigation / Swipe Instruction End -->



<!-- Javascript End -->


  </body>
</html><!-- Post Layout End -->
